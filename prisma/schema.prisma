// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model User {
  id       String @id @default(cuid())
  email    String @unique
  password String @default("123456") // Safety default
  role     String
  name     String
}

model Employee {
  id          String @id 
  employeeId  String @unique // HMG-XXXX used for visual ID
  name        String
  role        String
  department  String
  status      String
  email       String
  phone       String
  address     String
  joinDate    String
  avatar      String
  performance Int
  
  // Store complex objects as JSON strings for compatibility
  attendance    String 
  projects      String 
  leaveBalances String 
  salary        String 

  requisitions       Requisition[]
  attendanceRecords  AttendanceRecord[]
}

model Requisition {
  id            String @id
  
  requesterId   String
  requester     Employee @relation(fields: [requesterId], references: [id])
  
  // Redundant fields kept for frontend compatibility (mirroring mock-db)
  requesterName String 
  department    String
  item          String
  quantity      Int
  cost          Float
  status        String
  date          String
  priority      String
  
  // Extended fields
  location      String?
  approvedBy    String?
  approvedDate  DateTime?
  arrivedDate   DateTime?
  collectedDate DateTime?
  itemStatus    String?
}

model InventoryItem {
  id          String @id
  name        String
  sku         String
  category    String
  quantity    Int
  unit        String
  warehouse   String
  status      String
  value       Float
  lastUpdated String
}

model AttendanceRecord {
  id            String @id @default(cuid())
  employeeId    String
  date          String
  clockIn       String
  clockOut      String
  status        String
  isOvertime    Boolean
  isHolidayWork Boolean
  totalHours    String
  
  employee      Employee @relation(fields: [employeeId], references: [id])
}

model LeaveRequest {
  id              String @id
  employeeId      String
  employeeName    String
  employeeAvatar  String?
  type            String
  startDate       String
  endDate         String
  days            Int
  reason          String
  status          String
  appliedDate     String
  approvedBy      String?
  approvedDate    String?
}

model DisciplinaryCase {
  id              String @id
  employeeId      String
  employeeName    String
  employeeAvatar  String
  type            String
  severity        String
  status          String
  incidentDate    String
  description     String
  reportedBy      String
  actionsTaken    String // JSON array of strings
}

model Asset {
  id              String @id
  name            String
  category        String
  sku             String
  serialNumber    String
  location        String
  purchaseDate    String
  purchaseValue   Float
  condition       String
  lastMaintenance String?
  assignedTo      String? 
  assignedToName  String?
  status          String
}

model Project {
  id            String @id
  name          String
  managerId     String
  managerName   String
  budget        Float
  spent         Float
  status        String
  startDate     String
  endDate       String
  teamSize      Int
  description   String
}

model Supplier {
  id            String @id
  name          String
  category      String
  contactPerson String
  email         String
  phone         String
  address       String
  status        String
  rating        Float
  location      String
  speed         Int
  lastOrder     String
  totalSpent    Float
}

model TadaClaim {
  id            String @id
  employeeId    String
  employeeName  String
  date          String
  purpose       String
  amount        Float
  status        String
  approvedBy    String?
  attachments   String // JSON array
}

model Payslip {
  id            String @id
  employeeId    String
  employeeName  String
  month         String
  year          Int
  earnings      String // JSON
  deductions    String // JSON
  netSalary     Float
  status        String
  paymentDate   String?
}

model EmployeeDocument {
  id            String @id
  employeeId    String
  employeeName  String
  type          String
  status        String
  uploadDate    String
  expiryDate    String?
  fileUrl       String
  fileSize      String
}

model JobPosting {
  id              String @id
  title           String
  department      String
  type            String
  location        String
  salaryRange     String
  status          String
  postedDate      String
  candidatesCount Int
}

model Candidate {
  id            String @id
  jobId         String
  name          String
  email         String
  phone         String
  stage         String
  matchScore    Int
  appliedDate   String
  avatar        String
  experience    String
}
